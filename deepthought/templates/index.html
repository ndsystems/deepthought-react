<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>deepthought</title>
    <style type="text/css" media="screen">
        body {
            background-color: tan;
        }        
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        function updateStates(data) {
            console.log(data);
        }

        function setStage(x_form, y_form, z_form)
        {
            var x = x_form.value; 
            var y = y_form.value; 
            var z = z_form.value;

            socket.emit("stage", { "x" : x, "y" : y, "z" :z})
        }

        function selectShutter()
        {
            var epi = document.getElementById("epi_shutter").checked;
            var dia = document.getElementById("dia_shutter").checked;

            socket.emit("setShutter", { "epi" : epi, "dia" : dia})

        }

        var socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.on('connect', function() {
            console.log('websocket connected!');
        });

        socket.on('updateState', function(data) {
            updateStates(data)
        });




    </script>
</head>

<body>
    <h4>deepthought</h4>
    <hr />
    {{mpl_figure | safe}}

    <form>
        X : <input name="x_form" width="8px" placeholder="x" />
        Y : <input name="y_form" width="8px" placeholder="y" /><br />
        Z : <input name="z_form" width="8px" placeholder="z" /><br />
        <input value="set" type="button" width="8px" onclick="setStage(x_form, y_form, z_form)" />
    </form> 

    <form>
        <input onclick="selectShutter()" id="epi_shutter" type="radio" name="shutter" value="epi" checked> EPI
        <input onclick="selectShutter()" id="dia_shutter" type="radio" name="shutter" value="dia" > DIA
    </form>

</body>
</html>